## Распределенная система аналитики

## Используется заранее натренированная модель Yolo, потом будет замена модели на другую, в зависимости от входных данных, либо будет создана и натренирована новая
## Кафка пока не работает, не знаю почему, пытаюсь исправить
## Докер тоже не совсем собирается, пытаюсь исправить
## На вход подается видео, в будущем будет поток изображений, видео делит каждый кадр на составляющие картинки, каждая картинка обрабатывается и выделяется объект, пока что это машины, на выход подается тот же поток, но с выделенными объектами, можно изменить на текстовый -вывод с координатами или обработкой на текст
## Управление идет через оркестратор
## Используется асинхронное программирование для быстрой работы


## api
- **GET** - информация о сценарии по его ID (текущий статус \ параметры работы \ ...)
- **POST** - изменение состояния стейт-машины (запуск \ остановка \ ...)

## orchestrator (orchestration \ choreography \ mix \ ...)
- **чтение события (команды)** - получение запроса от api
- **контроль состояния** - сохранение \ изменение
- **выполнение действия** - управление runner`ом

### state machine
- **init_startup** - инициализация запуска
- **in_startup_processing** - промежуточное состояние, олицетворяющее процесс запуска
- **init_shutdown** - инициализация остановки
- **in_shutdown_processing** - промежуточное состояние, олицетворяющее процесс остановки
- **active** - активная состояние \ работа 
- **inactive** - выключенное состояние

## runner
- **чтение кадра** - живой поток (rtsp \ onvif \ ...) и\или заготовленное локальное видео
- **препроцессинг (optional)** - подготовка полученного кадра к отправке (BGR2RGB \ resize \ ...)
- **отправка кадра** - отправка кадра в сервис предсказания
- **получение результата** - чтение результатов с предсказаниями
- **постпроцессинг (optional)** - подготовка результата к обработке

## inference
- **чтение кадра** - получение кадра из очереди
- **предсказание** - inference
- **отправка результатов** - возврат результатов в runner

